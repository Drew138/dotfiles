---
- name: Check if the .fzf directory exists
  stat:
    path: "{{ ansible_env.HOME }}/.fzf"
  register: fzf_directory_facts

- name: Fail if .fzf directory does not exist
  fail:
    msg: "fzf cli does not exist."
  when: not fzf_directory_facts.stat.exists

- name: Check if the fzf binary exists
  stat:
    path: "{{ ansible_env.HOME }}/.fzf/bin/fzf"
  register: fzf_binary_facts

- name: Fail if fzf binary does not exist
  fail:
    msg: "fzf binary does not exist."
  when: not fzf_binary_facts.stat.exists
