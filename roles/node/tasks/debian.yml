---
- name: install nodejs prerequisites
  become: true
  apt:
    name:
      - apt-transport-https
      - gcc
      - g++
      - make
    state: latest

- name: Find files and directories
  find:
    paths: /home/runner/.nvm
  register: files_and_directories_found

- name: Print files and directories
  debug:
    msg: "{{ item.path }}"
  loop: "{{ files_and_directories_found.files }}"
  when: item.isdir == False

- name: install node
  become: true
  become_user: "{{ ansible_env.USER }}"
  shell: "source {{ ansible_env.HOME }}/.nvm/nvm.sh && nvm install --lts"
  changed_when: false
  args:
    executable: /bin/bash
