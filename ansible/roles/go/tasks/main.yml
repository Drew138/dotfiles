---
- name: delete previous installation
  file:
    path: /usr/local/go
    state: absent

- name: download and extract go tar file (linux)
  unarchive:
    src: https://go.dev/dl/go{{ go_version }}.linux-amd64.tar.gz
    dest: /usr/local
    remote_src: true
  when: is_debian_distro

- name: download and extract go tar file (macos)
  unarchive:
    src: https://go.dev/dl/go{{ go_version }}.darwin-amd64.tar.gz
    dest: /usr/local
    remote_src: true
    format: gz
  when: is_macos and homebrew_check.stat.exists
